<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="blogStyle.css">
    <title>MonkeyJump微信小游戏日志</title>
</head>
<body topmargin="0px" leftmargin="0px">
<div class = "BlogTopSection">
    <div id="blogTitle"> MonkeyJump微信小游戏日志 </div>
</div>
<div class = "MainBody">
    <p>2019年夏季Web前端小学期，我和陈刚同学组队完成了MonkeyJump微信小游戏，下面是游戏的截图：</p>
    <div id = "pic3">
    <img class = "pic" src="blog4rsc/pic1.png"><img class = "pic" src="blog4rsc/pic2.png"><img class = "pic" src="blog4rsc/pic3.png">
    </div>
    <p>游戏创意来自于小游戏sling and jump。我们模仿这款游戏制作了Monkey Jump。游戏中玩家手指按压屏幕，可以让小猴子借助细杆挂在悬空立柱下做钟摆运动，手指离开屏幕则连杆消失。玩家需要通过灵巧的操作，使得小猴子借助钟摆运动到达终点获得奖品，且途中不碰撞到立柱或落地。</p>
    <p>游戏整体玩法和sling and jump类似，但是我们给这个游戏设置了一个有趣的情境：小猴子在森林中上下翻腾，获得终点的食物：香蕉。</p>
    <p>游戏设置了多个关卡，难度逐渐增加，既有趣味性，也有一定的挑战性。
        我们的所有工作，从素材搜集、代码实现、界面安排都是自主完成。</p>
    <p>点击开始界面的start后进入游戏界面。游戏界面最上方显示了当前关卡信息：LEVEL 0。进度条实时显示这一关的完成进度。猴子初始站立在小平台上，这时点击一下屏幕，小猴子会向前跳起，游戏就正式开始了。手指触摸屏幕，则如图二猴子会通过黑色的细杆挂在悬空立柱上，保持触摸，猴子做钟摆运动，且越摆越高。松开手指，猴子沿原方向飞出。再次按压猴子会连接到下一根柱子上。注意：</p>
    <ol>    
    <li>除了第一根柱子和最后一根柱子之外，每一根悬空柱子夹在两根地面柱子之间。</li>
    <li>猴子在地面两柱子之间时，屏幕只接受一次按压，多次按压会让之后其他操作无效。</li>
    <li>每根悬空柱子最多接受一次连接，且导致这次连接的按压需要猴子在地面两根柱子之间。</li>
    </ol>    
    <p>猴子落到终点平台会获得香蕉，同时有礼花效果以及胜利音效，点击按钮Next Level进入下一关。猴子落地则该关卡失败，有落地音效，点击Start Again按钮回到这一关起点继续闯关。点击左上方的蓝色主页图标回到主界面，可以通过reset按钮重置关卡，通过start按钮开始游戏。</p>
    <p>游戏整体操作简单，通过实际操作可以很快上手。但是想要闯关所有的关卡也不是易事。</p>
    <b>游戏设计的难点与要点</b>
    <p>游戏模拟猴子在重力的作用下通过细杆连接柱子不断翻腾前进。为了使猴子的运动尽可能真实，我们首先想到直接利用物理公式计算猴子的运动轨迹，这样做比较复杂。以及猴子在碰到地面或柱子等障碍物后，自身的运动状态特别是旋转的处理十分复杂。而如果使用物理系统实现运动，十分生动、真实，效果很好。</p>
    <p>然而，使用物理引擎促使猴子运动的结果是，猴子在连接柱子进行钟摆运动的过程很难处理。为了配合物理引擎，我们使用了joint关节。猴子使用WeldJoint焊接关节将自己和连杆焊接在一起，然后使用RevoluteJoint旋转关节将连杆与柱子连在一起。这样就能较好的模拟钟摆运动了。使用关节的过程中也遇到了困难，因为网上相关参考资料非常少，需要自己不断摸索。</p>
    <p>当屏幕接受到手指触摸事件后，猴子依次调用一系列函数。寻找到应该悬挂的柱子->计算猴子的旋转角度，生成细杆将两者焊接在一起->将细杆和柱子连接->改变猴子状态->update()函数改变旋转的角速度。额外困难1：猴子自身的旋转、细杆的生成以及旋转、细杆和柱子三者的相连，需要几个物体位置上精准的配合，否则会出现卡顿以及屏幕抖动。额外困难2：猴子角速度的选取困难，需要尽可能使得猴子运动状态模拟现实。从一开始地匀速转动到后来地根据重力进行分解，进行了很多尝试。</p>
</div>

<!--屏幕底部分-->
<div class = "ScreenLine"></div>
<div id = "bottomSection">
    <!--作者及版权-->
    <div id="bottomText"> Copyright © 2019 by Yang Fan </div>
</div>

</body>
</html>